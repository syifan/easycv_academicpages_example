{"version":3,"file":"index.cjs","sources":["../src/renderCv.js"],"sourcesContent":["const CONTACT_ORDER = [\"phone\", \"email\", \"website\"];\n\nconst isNonEmptyString = (value) =>\n  typeof value === \"string\" && value.trim().length > 0;\n\nconst iconLooksLikeFontAwesome = (value) => /\\bfa-[\\w-]+/i.test(value);\n\nconst getIconDescriptor = (iconValue) => {\n  if (isNonEmptyString(iconValue)) {\n    const trimmed = iconValue.trim();\n    if (iconLooksLikeFontAwesome(trimmed)) {\n      return { type: \"fontawesome\", value: trimmed };\n    }\n  }\n  return null;\n};\n\nconst formatWebsite = (value) =>\n  /^https?:\\/\\//i.test(value) ? value : `https://${value}`;\n\nconst normalizeArray = (value) => (Array.isArray(value) ? value : []);\n\nconst isHtmlMetaLine = (metaLine) =>\n  metaLine &&\n  typeof metaLine === \"object\" &&\n  !Array.isArray(metaLine) &&\n  typeof metaLine.html === \"string\";\n\nconst isHtmlValue = (value) =>\n  value &&\n  typeof value === \"object\" &&\n  !Array.isArray(value) &&\n  typeof value.html === \"string\";\n\nconst hasContent = (value) => {\n  if (value === null || value === undefined) {\n    return false;\n  }\n  if (isHtmlValue(value)) {\n    return value.html.trim().length > 0;\n  }\n  if (typeof value === \"boolean\") {\n    return true;\n  }\n  return String(value).trim().length > 0;\n};\n\nconst resolveTrimmedValue = (value) =>\n  isNonEmptyString(value) ? value.trim() : \"\";\n\nconst createContactEntry = (key, rawValue) => {\n  if (isNonEmptyString(rawValue)) {\n    const value = rawValue.trim();\n    return {\n      key,\n      value,\n      displayValue: value,\n      icon: null,\n      href:\n        key === \"email\"\n          ? `mailto:${value}`\n          : key === \"website\"\n          ? formatWebsite(value)\n          : undefined,\n    };\n  }\n\n  if (rawValue && typeof rawValue === \"object\" && !Array.isArray(rawValue)) {\n    const value = resolveTrimmedValue(rawValue.value);\n    if (!value) {\n      return null;\n    }\n\n    const entry = {\n      key,\n      value,\n      displayValue: resolveTrimmedValue(rawValue.display) || value,\n      href: resolveTrimmedValue(rawValue.href) || undefined,\n      icon: isNonEmptyString(rawValue.icon)\n        ? getIconDescriptor(rawValue.icon)\n        : null,\n    };\n\n    if (!entry.href) {\n      if (key === \"email\") {\n        entry.href = `mailto:${value}`;\n      } else if (key === \"website\") {\n        entry.href = formatWebsite(value);\n      }\n    }\n\n    if (typeof rawValue.newTab === \"boolean\") {\n      entry.openInNewTab = rawValue.newTab;\n    }\n\n    if (isNonEmptyString(rawValue.label)) {\n      entry.label = rawValue.label.trim();\n    }\n\n    return entry;\n  }\n\n  return null;\n};\n\nconst buildContactEntries = (contact) => {\n  if (!contact || typeof contact !== \"object\" || Array.isArray(contact)) {\n    return [];\n  }\n\n  const entries = [];\n  const processedKeys = new Set();\n\n  const tryAddEntry = (key) => {\n    if (processedKeys.has(key)) {\n      return;\n    }\n    processedKeys.add(key);\n    const entry = createContactEntry(key, contact[key]);\n    if (entry) {\n      entries.push(entry);\n    }\n  };\n\n  CONTACT_ORDER.forEach(tryAddEntry);\n  Object.keys(contact).forEach((key) => {\n    if (!processedKeys.has(key)) {\n      tryAddEntry(key);\n    }\n  });\n\n  return entries;\n};\n\nconst createElement = (tagName, { className, attrs } = {}) => {\n  const element = document.createElement(tagName);\n  if (className) {\n    element.className = className;\n  }\n  if (attrs) {\n    Object.entries(attrs).forEach(([attr, value]) => {\n      if (value === undefined || value === null) {\n        return;\n      }\n      element.setAttribute(attr, value);\n    });\n  }\n  return element;\n};\n\nconst renderContactIcon = (descriptor) => {\n  if (!descriptor || descriptor.type !== \"fontawesome\") {\n    return null;\n  }\n  const icon = createElement(\"span\", {\n    className: `contact-icon fa-fw ${descriptor.value}`,\n    attrs: { \"aria-hidden\": \"true\" },\n  });\n  return icon;\n};\n\nconst renderContactEntry = (entry) => {\n  const wrapper = createElement(\"div\", {\n    className: \"contact-item\",\n  });\n  const icon = renderContactIcon(entry.icon);\n  if (icon) {\n    wrapper.appendChild(icon);\n  }\n\n  const displayValue = entry.displayValue ?? entry.value ?? \"\";\n  if (entry.href) {\n    const anchor = createElement(\"a\", {\n      attrs: {\n        href: entry.href,\n        target: entry.openInNewTab ? \"_blank\" : undefined,\n        rel: entry.openInNewTab ? \"noreferrer\" : undefined,\n      },\n    });\n    anchor.textContent = displayValue;\n    wrapper.appendChild(anchor);\n  } else {\n    const span = document.createElement(\"span\");\n    span.textContent = displayValue;\n    wrapper.appendChild(span);\n  }\n  return wrapper;\n};\n\nconst renderTagline = (tags) => {\n  if (!Array.isArray(tags) || tags.length === 0) {\n    return null;\n  }\n  const tagline = createElement(\"p\", { className: \"tagline\" });\n  tags.forEach((tag, index) => {\n    const span = document.createElement(\"span\");\n    span.textContent = String(tag);\n    tagline.appendChild(span);\n    if (index < tags.length - 1) {\n      tagline.appendChild(document.createElement(\"br\"));\n    }\n  });\n  return tagline;\n};\n\nconst renderHeader = (header, contactEntries) => {\n  const headerElement = createElement(\"header\", { className: \"cv-header\" });\n  const nameWrapper = document.createElement(\"div\");\n  const heading = document.createElement(\"h1\");\n  heading.textContent = header.name ?? \"\";\n  nameWrapper.appendChild(heading);\n\n  const tagline = renderTagline(Array.isArray(header.tags) ? header.tags : []);\n  if (tagline) {\n    nameWrapper.appendChild(tagline);\n  }\n\n  headerElement.appendChild(nameWrapper);\n\n  if (contactEntries.length > 0) {\n    const contact = createElement(\"div\", { className: \"contact\" });\n    contactEntries.forEach((entry) =>\n      contact.appendChild(renderContactEntry(entry))\n    );\n    headerElement.appendChild(contact);\n  }\n\n  return headerElement;\n};\n\nconst renderMetaLine = (metaLine) => {\n  if (metaLine == null) {\n    return null;\n  }\n\n  if (isHtmlMetaLine(metaLine)) {\n    const paragraph = createElement(\"p\", { className: \"list-heading\" });\n    paragraph.innerHTML = metaLine.html;\n    return paragraph;\n  }\n\n  const paragraph = createElement(\"p\", { className: \"list-heading\" });\n  paragraph.textContent = String(metaLine);\n  return paragraph;\n};\n\nconst renderValueNode = (value, { strong = false } = {}) => {\n  if (!hasContent(value)) {\n    return null;\n  }\n\n  if (isHtmlValue(value)) {\n    const span = document.createElement(\"span\");\n    span.innerHTML = value.html;\n    return span;\n  }\n\n  const text = document.createTextNode(String(value));\n  if (!strong) {\n    const span = document.createElement(\"span\");\n    span.appendChild(text);\n    return span;\n  }\n\n  const strongEl = document.createElement(\"strong\");\n  strongEl.appendChild(text);\n  return strongEl;\n};\n\nconst renderTableEntry = (entry, condensed) => {\n  const content = normalizeArray(entry?.content ?? []);\n  const meta = normalizeArray(entry?.meta ?? []);\n  const hasIndexColumn = hasContent(entry?.index);\n  const hasMetaColumn = meta.some(hasContent);\n  const rowCount = Math.max(\n    content.length,\n    hasMetaColumn ? meta.length : 0,\n    hasIndexColumn ? 1 : 0\n  );\n\n  if (rowCount === 0) {\n    return null;\n  }\n\n  const fragment = document.createDocumentFragment();\n  for (let rowIndex = 0; rowIndex < rowCount; rowIndex += 1) {\n    const tr = document.createElement(\"tr\");\n    const rowClassNames = [];\n    if (rowIndex === 0) {\n      rowClassNames.push(\"entry-start\");\n    }\n    if (condensed) {\n      rowClassNames.push(\"condensed-row\");\n    }\n    tr.className = rowClassNames.filter(Boolean).join(\" \");\n\n    if (hasIndexColumn) {\n      const td = createElement(\"td\", { className: \"hanging-cell\" });\n      if (rowIndex === 0) {\n        const valueNode = renderValueNode(entry.index);\n        if (valueNode) {\n          td.appendChild(valueNode);\n        }\n      }\n      tr.appendChild(td);\n    }\n\n    if (hasMetaColumn) {\n      const td = createElement(\"td\", { className: \"right-cell\" });\n      const metaValue = meta[rowIndex];\n      if (hasContent(metaValue)) {\n        const valueNode = renderValueNode(metaValue);\n        if (valueNode) {\n          td.appendChild(valueNode);\n        }\n      }\n      tr.appendChild(td);\n    }\n\n    if (condensed) {\n      if (rowIndex === 0) {\n        const td = createElement(\"td\", { className: \"left-cell\" });\n        td.setAttribute(\"rowspan\", String(rowCount));\n        content.forEach((value, contentIndex) => {\n          if (!hasContent(value)) {\n            return;\n          }\n          const span = createElement(\"span\", {\n            className:\n              contentIndex === 0 ? \"left-header-span\" : \"left-entry-span\",\n          });\n          const valueNode = renderValueNode(value, {\n            strong: contentIndex === 0,\n          });\n          if (valueNode) {\n            span.appendChild(valueNode);\n            td.appendChild(span);\n          }\n        });\n        tr.appendChild(td);\n      }\n    } else {\n      const contentValue = content[rowIndex];\n      const td = document.createElement(\"td\");\n      if (rowIndex === 0 && hasContent(contentValue)) {\n        td.className = \"left-header\";\n      }\n      const valueNode = renderValueNode(contentValue, {\n        strong: rowIndex === 0,\n      });\n      if (valueNode) {\n        td.appendChild(valueNode);\n      }\n      tr.appendChild(td);\n    }\n\n    fragment.appendChild(tr);\n  }\n\n  return fragment;\n};\n\nconst renderTable = (entries, condensed) => {\n  const table = createElement(\"table\", { className: \"cv-table\" });\n  const tbody = document.createElement(\"tbody\");\n\n  entries.forEach((entry) => {\n    const rowFragment = renderTableEntry(entry, condensed);\n    if (rowFragment) {\n      tbody.appendChild(rowFragment);\n    }\n  });\n\n  table.appendChild(tbody);\n  return table;\n};\n\nconst renderSubsection = (subsection) => {\n  const wrapper = createElement(\"div\", { className: \"subsection\" });\n  if (subsection.id) {\n    wrapper.id = subsection.id;\n  }\n\n  const heading = document.createElement(\"h3\");\n  heading.textContent = subsection.title ?? \"\";\n  wrapper.appendChild(heading);\n\n  const metaLines = normalizeArray(subsection.meta);\n  metaLines.forEach((metaLine) => {\n    const metaNode = renderMetaLine(metaLine);\n    if (metaNode) {\n      wrapper.appendChild(metaNode);\n    }\n  });\n\n  const entries = normalizeArray(subsection.entries);\n  if (entries.length > 0) {\n    wrapper.appendChild(renderTable(entries, Boolean(subsection.condensed)));\n  }\n\n  return wrapper;\n};\n\nconst renderSection = (section) => {\n  if (!section) {\n    return null;\n  }\n  const sectionElement = createElement(\"section\", {\n    className: \"cv-section\",\n    attrs: {\n      id: section.id || undefined,\n      \"aria-label\": section.title || undefined,\n    },\n  });\n\n  const header = createElement(\"header\", { className: \"section-header\" });\n  const heading = document.createElement(\"h2\");\n  heading.textContent = section.title ?? \"\";\n  header.appendChild(heading);\n  sectionElement.appendChild(header);\n\n  const metaLines = normalizeArray(section.meta);\n  metaLines.forEach((metaLine) => {\n    const metaNode = renderMetaLine(metaLine);\n    if (metaNode) {\n      sectionElement.appendChild(metaNode);\n    }\n  });\n\n  const entries = normalizeArray(section.entries);\n  if (entries.length > 0) {\n    sectionElement.appendChild(\n      renderTable(entries, Boolean(section.condensed))\n    );\n  }\n\n  const subsections = normalizeArray(section.subsections);\n  subsections.forEach((subsection) => {\n    const subsectionNode = renderSubsection(subsection);\n    sectionElement.appendChild(subsectionNode);\n  });\n\n  return sectionElement;\n};\n\nconst createAttribution = () => {\n  const footer = createElement(\"footer\", { className: \"template-attribution\" });\n  footer.innerHTML =\n    'CV template provided by <a href=\"https://sarchlab.org/syifan\" target=\"_blank\" rel=\"noreferrer\">Yifan Sun</a>. Template can be found at <a href=\"https://github.com/syifan/easycv\" target=\"_blank\" rel=\"noreferrer\">https://github.com/syifan/easycv</a>.';\n  return footer;\n};\n\nlet printInstanceCounter = 0;\nconst createPrintId = () => {\n  printInstanceCounter += 1;\n  return `easycv-${Date.now().toString(36)}-${printInstanceCounter.toString(\n    36\n  )}`;\n};\n\nconst createFloatingActions = (printTargetId) => {\n  const actions = createElement(\"div\", {\n    className: \"floating-actions\",\n    attrs: { \"aria-label\": \"page controls\" },\n  });\n\n  const topButton = createElement(\"button\", {\n    className: \"action-button\",\n    attrs: { type: \"button\" },\n  });\n  topButton.textContent = \"Back to Top\";\n  topButton.addEventListener(\"click\", () => {\n    if (\n      typeof window !== \"undefined\" &&\n      typeof window.scrollTo === \"function\"\n    ) {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  });\n\n  const downloadButton = createElement(\"button\", {\n    className: \"action-button\",\n    attrs: { type: \"button\" },\n  });\n  downloadButton.textContent = \"Download PDF\";\n  downloadButton.addEventListener(\"click\", () => {\n    if (typeof window === \"undefined\" || typeof document === \"undefined\") {\n      return;\n    }\n\n    const body = document.body;\n    const enableCvOnlyPrint = () => {\n      body.classList.add(\"easycv-print-cv-only\");\n      if (printTargetId) {\n        body.setAttribute(\"data-easycv-print-id\", printTargetId);\n      }\n    };\n\n    const disableCvOnlyPrint = () => {\n      body.classList.remove(\"easycv-print-cv-only\");\n      if (\n        printTargetId &&\n        body.getAttribute(\"data-easycv-print-id\") === printTargetId\n      ) {\n        body.removeAttribute(\"data-easycv-print-id\");\n      }\n    };\n\n    enableCvOnlyPrint();\n\n    const mediaQuery = window.matchMedia ? window.matchMedia(\"print\") : null;\n    const handleChange = (event) => {\n      if (!event.matches) {\n        disableCvOnlyPrint();\n      }\n    };\n\n    if (mediaQuery) {\n      if (mediaQuery.addEventListener) {\n        mediaQuery.addEventListener(\"change\", handleChange);\n      } else if (mediaQuery.addListener) {\n        mediaQuery.addListener(handleChange);\n      }\n    }\n\n    if (typeof window.print === \"function\") {\n      window.print();\n    }\n\n    setTimeout(disableCvOnlyPrint, 1500);\n  });\n\n  actions.appendChild(topButton);\n  actions.appendChild(downloadButton);\n  return actions;\n};\n\nconst createCvDom = (data, { includeActions = true } = {}) => {\n  const container = createElement(\"div\", { className: \"cv-container\" });\n  const page = createElement(\"div\", { className: \"cv-page\" });\n  const printId = createPrintId();\n  container.dataset.easycvPrintId = printId;\n  const headerData = data?.header ?? { name: \"\" };\n  const sections = normalizeArray(data?.sections);\n  const contactEntries = buildContactEntries(headerData.contact);\n\n  page.appendChild(renderHeader(headerData, contactEntries));\n\n  const main = document.createElement(\"main\");\n  sections.forEach((section) => {\n    const sectionNode = renderSection(section);\n    if (sectionNode) {\n      main.appendChild(sectionNode);\n    }\n  });\n  page.appendChild(main);\n\n  container.appendChild(page);\n  container.appendChild(createAttribution());\n\n  if (includeActions) {\n    container.appendChild(createFloatingActions(printId));\n  }\n\n  return {\n    element: container,\n    headerName: resolveTrimmedValue(headerData?.name),\n  };\n};\n\nconst resolveContainer = (target) => {\n  if (typeof document === \"undefined\") {\n    throw new Error(\"renderCv requires a DOM-like environment\");\n  }\n\n  if (typeof target === \"string\") {\n    const element = document.querySelector(target);\n    if (!element) {\n      throw new Error(`No element matches selector: ${target}`);\n    }\n    return element;\n  }\n\n  if (target && typeof target.appendChild === \"function\") {\n    return target;\n  }\n\n  throw new TypeError(\"renderCv expects a DOM element or selector string\");\n};\n\nconst updateDocumentTitle = (name, template = \"%s - Curriculum Vitae\") => {\n  if (!name || typeof document === \"undefined\") {\n    return;\n  }\n\n  if (template && template.includes(\"%s\")) {\n    document.title = template.replace(\"%s\", name);\n    return;\n  }\n\n  if (template) {\n    document.title = template;\n    return;\n  }\n\n  document.title = name;\n};\n\nexport const createCvElement = (data, options = {}) =>\n  createCvDom(data, { includeActions: options.actions !== false }).element;\n\nexport const renderCv = (target, data, options = {}) => {\n  const container = resolveContainer(target);\n  const { element, headerName } = createCvDom(data, {\n    includeActions: options.actions !== false,\n  });\n\n  container.innerHTML = \"\";\n  container.appendChild(element);\n\n  if (options.setDocumentTitle !== false) {\n    updateDocumentTitle(headerName, options.titleTemplate);\n  }\n\n  return element;\n};\n"],"names":["CONTACT_ORDER","isNonEmptyString","value","iconLooksLikeFontAwesome","getIconDescriptor","iconValue","trimmed","formatWebsite","normalizeArray","isHtmlMetaLine","metaLine","isHtmlValue","hasContent","resolveTrimmedValue","createContactEntry","key","rawValue","entry","buildContactEntries","contact","entries","processedKeys","tryAddEntry","createElement","tagName","className","attrs","element","attr","renderContactIcon","descriptor","renderContactEntry","wrapper","icon","displayValue","anchor","span","renderTagline","tags","tagline","tag","index","renderHeader","header","contactEntries","headerElement","nameWrapper","heading","renderMetaLine","paragraph","renderValueNode","strong","text","strongEl","renderTableEntry","condensed","content","meta","hasIndexColumn","hasMetaColumn","rowCount","fragment","rowIndex","tr","rowClassNames","td","valueNode","metaValue","contentIndex","contentValue","renderTable","table","tbody","rowFragment","renderSubsection","subsection","metaNode","renderSection","section","sectionElement","subsectionNode","createAttribution","footer","printInstanceCounter","createPrintId","createFloatingActions","printTargetId","actions","topButton","downloadButton","body","enableCvOnlyPrint","disableCvOnlyPrint","mediaQuery","handleChange","event","createCvDom","data","includeActions","container","page","printId","headerData","sections","main","sectionNode","resolveContainer","target","updateDocumentTitle","name","template","createCvElement","options","renderCv","headerName"],"mappings":"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"}